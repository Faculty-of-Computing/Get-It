{% extends "base.html" %}

{% block content %}
<div class="category-page container">
    <div class="filter-banner">
        <button id="toggle-filters-btn">
            <img src="{{ url_for('static', filename='searchicon.png') }}" alt="Filter"
                style="width: 24px; height: 24px;">
            <span>Filter & Sort</span>
        </button>
    </div>

    <!-- Filters Modal -->
    <aside class="category-filters">
        <div class="filter-header">
            <h3>Filter By</h3>
            <button id="close-filters-btn">&times;</button>
        </div>
        <form id="filterForm" method="get">
            <!-- The existing filter form content goes here -->
        </form>
    </aside>

    <!-- Products -->
    <section class="featured-section">
        {% if products %}
        <div class="products-grid">
            {% for product in products %}
            <div class="product-card" onclick="openModal('{{ loop.index0 }}')">
                <!-- ... product card content ... -->
            </div>
            {% endfor %}
        </div>
        <!-- Product Modals -->
        {% for product in products %}
        <div class="modal" id="modal-{{ loop.index0 }}">
            <!-- ... modal content ... -->
        </div>
        {% endfor %}
        {% else %}
        <div class="no-products">
            <h3>No Products Found</h3>
            <p>There are currently no products available in this category or matching your filter criteria.</p>
            <a href="{{ url_for('home') }}" class="btn">Continue Shopping</a>
        </div>
        {% endif %}
    </section>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const toggleBtn = document.getElementById('toggle-filters-btn');
        const closeBtn = document.getElementById('close-filters-btn');
        const filtersMenu = document.querySelector('.category-filters');
        const body = document.body;

        if (toggleBtn) {
            toggleBtn.addEventListener('click', function () {
                filtersMenu.classList.add('open');
                body.style.overflow = 'hidden';
            });
        }

        if (closeBtn) {
            closeBtn.addEventListener('click', function () {
                filtersMenu.classList.remove('open');
                body.style.overflow = '';
            });
        }
    });
</script>


{% endblock %}