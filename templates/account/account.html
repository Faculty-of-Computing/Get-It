{% extends "base.html" %}

{% block content %}
<section class="account-page container">
    <h1>My Account</h1>
    <p>Manage your account details and orders.</p>

    <!-- User Details -->
    <div class="account-section">
        <h2>Account Details</h2>
        <div class="account-details">
            <div class="profile-image"
                style="width:120px;height:120px;display:flex;align-items:center;justify-content:center;">
                <img src="{{ current_user.profile_image or url_for('static', filename='default_profile.svg') }}" alt="Profile Image"
                    style="width:100px;height:100px;border-radius:50%;object-fit:cover;box-shadow:0 2px 8px rgba(0,0,0,0.08);border:2px solid #fff;">
            </div>
            <p><strong>Username:</strong> {{ current_user.username }}</p>
            <p><strong>Email:</strong> {{ current_user.email }}</p>
            <p><strong>First Name</strong> {{ current_user.first_name }}</p>
            <p><strong>Last Name</strong> {{ current_user.last_name }}</p>
        </div>
        <a href="{{ url_for('account.edit_account') }}" class="btn">Edit Account</a>
    </div>

    <!-- Order History -->
    <div class="account-section">
        <h2>Order History</h2>
        {% if orders %}
        <div class="order-history">
            {% for order in orders %}
            <div class="order-card">
                <p><strong>Order ID:</strong> {{ order.id }}</p>
                <p><strong>Date:</strong> {{ order.created_at.strftime('%B %d, %Y') }}</p>
                <p><strong>Total:</strong> â‚¦{{ "%.2f"|format(order.total_price) }}</p>
                <p><strong>Status:</strong> <span class="order-status order-status-{{ order.status|lower }}">{{
                        order.status|capitalize }}</span></p>
                <a href="{{ url_for('order.view_order', order_id=order.id) }}" class="btn-small">View Details</a>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p>No orders found.</p>
        {% endif %}
    </div>

    <!-- Shop Button -->


    <!-- Logout -->
    <div class="account-section">
        <form method="post" action="{{ url_for('auth.logout') }}">
            <button type="submit" class="btn logout-btn">Log Out</button>
        </form>
    </div>
</section>
{% endblock %}